---
config:
  theme: redux-dark
---
flowchart TD
 subgraph subGraph2["Application Processing Loop"]
        A["LoanApplication<br>instance"]
        P1["create_applicant_profile()"]
        B1["basic_risk_checker"]
        B2["reasoning_risk_checker"]
        E1["evaluate_decision_quality()"]
        E2["evaluate_decision_quality()"]
        R1["Store basic results"]
        R2["Store CoT results"]
  end
    A --> P1
    P1 --> B1 & B2
    B1 --> E1
    B2 --> E2
    E1 --> R1
    E2 --> R2
    R1 --> Agg["results dict"]
    R2 --> Agg
    Agg --> Analyze["analyze_results()"]
    Analyze --> Opt["demonstrate_optimization()"]
     A:::profile
     P1:::profile
     B1:::basic
     B2:::cot
     E1:::evaluation
     E2:::evaluation
     R1:::results
     R2:::results
     Agg:::results
     Analyze:::analysis
     Opt:::optimize
    classDef setup       fill:#FFECB3,stroke:#333,stroke-width:1px,color:#000
    classDef define      fill:#F5F5F5,stroke:#333,stroke-width:1px,color:#000
    classDef profile     fill:#BBDEFB,stroke:#333,stroke-width:1px,color:#000
    classDef basic       fill:#C8E6C9,stroke:#333,stroke-width:1px,color:#000
    classDef cot         fill:#FFE0B2,stroke:#333,stroke-width:1px,color:#000
    classDef evaluation  fill:#D1C4E9,stroke:#333,stroke-width:1px,color:#000
    classDef results     fill:#E0F7FA,stroke:#333,stroke-width:1px,color:#000
    classDef analysis    fill:#B2DFDB,stroke:#333,stroke-width:1px,color:#000
    classDef optimize    fill:#FFCCBC,stroke:#333,stroke-width:1px,color:#000

